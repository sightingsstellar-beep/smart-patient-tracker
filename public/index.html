<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <meta name="theme-color" content="#1a73e8" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="manifest" href="/manifest.json" />
  <title>The Smart Patient Wellness Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>
<body>
  <!-- ========== HEADER ========== -->
  <header class="header">
    <div class="header-top">
      <div class="header-left">
        <h1 class="title"><span id="child-name">â€¦</span> <span class="heart">ğŸ’™</span></h1>
        <div class="subtitle" id="current-date">Loading...</div>
      </div>
      <div class="header-right">
        <div class="clock" id="current-time">--:--</div>
        <div class="refresh-indicator" id="refresh-badge" title="Auto-refresh every 30s">ğŸ”„</div>
      </div>
    </div>
    <nav class="tab-bar">
      <a href="/" class="tab-item active">
        <span class="tab-icon">ğŸ“Š</span>
        <span class="tab-label">Today</span>
      </a>
      <a href="/history" class="tab-item">
        <span class="tab-icon">ğŸ“…</span>
        <span class="tab-label">History</span>
      </a>
      <a href="/chat" class="tab-item">
        <span class="tab-icon">ğŸ¤</span>
        <span class="tab-label">Chat</span>
      </a>
      <a href="/settings" class="tab-item">
        <span class="tab-icon">âš™ï¸</span>
        <span class="tab-label">Settings</span>
      </a>
    </nav>
  </header>

  <!-- Yellow banner â€” shown when logging for yesterday -->
  <div class="yesterday-banner" id="yesterday-banner" style="display:none;">
    âš ï¸ Logging for yesterday
  </div>

  <main class="main">

    <!-- ========== QUICK LOG ========== -->
    <section class="card quick-log-card">
      <div class="card-header">
        <span class="card-icon">âš¡</span>
        <h2>Quick Log</h2>
        <!-- Date toggle -->
        <div class="date-toggle" id="date-toggle">
          <button class="date-toggle-btn active" id="toggle-today" data-day="today">Today</button>
          <button class="date-toggle-btn" id="toggle-yesterday" data-day="yesterday">Yesterday</button>
        </div>
      </div>
      <p class="quick-log-hint">Tap a button to log an entry:</p>
      <div class="quick-buttons">
        <button class="quick-btn" data-type="input"  data-fluid="water">ğŸ’§ Water</button>
        <button class="quick-btn" data-type="input"  data-fluid="pediasure">ğŸ¼ PediaSure</button>
        <button class="quick-btn" data-type="output" data-fluid="urine">ğŸš½ Urine</button>
        <button class="quick-btn" data-type="input"  data-fluid="juice">ğŸ§ƒ Juice</button>
        <button class="quick-btn" data-type="input"  data-fluid="yogurt_drink">ğŸ¥› Yogurt</button>
        <button class="quick-btn" data-type="output" data-fluid="poop">ğŸ’© Poop</button>
        <button class="quick-btn" data-type="input"  data-fluid="milk">ğŸ¥› Milk</button>
        <button class="quick-btn" data-type="gag"    data-count="1">ğŸ¤¢ Gag Ã—1</button>
        <button class="quick-btn" data-type="output" data-fluid="vomit">ğŸ¤® Vomit</button>
      </div>
      <div class="undo-row">
        <button class="undo-btn" id="undo-btn">â†©ï¸ Undo Last Entry</button>
      </div>
      <!-- Amount modal (inputs + outputs) -->
      <div class="amount-modal" id="amount-modal" style="display:none;">
        <div class="amount-modal-inner">
          <h3>Enter amount (ml)</h3>
          <input type="number" id="amount-input" min="1" max="1000" placeholder="e.g. 85" />
          <div class="modal-buttons">
            <button class="btn-cancel" id="modal-cancel">Cancel</button>
            <button class="btn-confirm" id="modal-confirm">Log It</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ========== DAILY CHECKS HEADER ========== -->
    <div class="daily-checks-label">Daily Checks</div>

    <!-- ========== DAILY WEIGHT ========== -->
    <section class="card" id="weight-card">
      <div class="card-header">
        <span class="card-icon">âš–ï¸</span>
        <h2>Daily Weight</h2>
      </div>
      <div class="weight-log-row">
        <input type="number" id="weight-input" min="1" max="99" step="0.1" placeholder="e.g. 14.2" />
        <span class="weight-unit-label">kg</span>
        <button class="btn-log-weight" id="weight-log-btn">Log Weight</button>
      </div>
      <div class="weight-status" id="weight-status" style="display:none;">
        <span id="weight-today-label"></span>
        <span id="weight-trend"></span>
        <button class="weight-update-link" id="weight-update-btn">Update</button>
      </div>
    </section>

    <!-- ========== VITALS & WELLNESS ========== -->
    <section class="card wellness-card" id="wellness-card">
      <div class="card-header">
        <span class="card-icon">â¤ï¸</span>
        <h2>Vitals &amp; Wellness</h2>
      </div>

      <!-- Period toggle -->
      <div class="wellness-period-toggle">
        <button class="period-btn active" id="period-afternoon" data-period="afternoon">Afternoon</button>
        <button class="period-btn" id="period-evening" data-period="evening">Evening</button>
      </div>

      <!-- Logged indicator -->
      <div class="wellness-logged-indicator" id="wellness-logged-indicator" style="display:none;">
        âœ“ Already logged for this period â€”
        <button class="wellness-edit-link" id="wellness-edit-btn">Edit</button>
      </div>

      <!-- Metric button groups -->
      <div class="wellness-metrics" id="wellness-metrics">

        <div class="wellness-metric-group">
          <div class="wellness-metric-label">Cyanosis</div>
          <div class="wellness-btn-group" data-metric="cyanosis">
            <button class="wellness-choice-btn" data-value="1">None</button>
            <button class="wellness-choice-btn" data-value="3">Mild</button>
            <button class="wellness-choice-btn" data-value="6">Moderate</button>
            <button class="wellness-choice-btn" data-value="9">Severe</button>
          </div>
        </div>

        <div class="wellness-metric-group">
          <div class="wellness-metric-label">Energy</div>
          <div class="wellness-btn-group" data-metric="energy">
            <button class="wellness-choice-btn" data-value="9">High</button>
            <button class="wellness-choice-btn" data-value="7">Normal</button>
            <button class="wellness-choice-btn" data-value="4">Low</button>
            <button class="wellness-choice-btn" data-value="2">Very Low</button>
          </div>
        </div>

        <div class="wellness-metric-group">
          <div class="wellness-metric-label">Appetite</div>
          <div class="wellness-btn-group" data-metric="appetite">
            <button class="wellness-choice-btn" data-value="9">Great</button>
            <button class="wellness-choice-btn" data-value="7">Good</button>
            <button class="wellness-choice-btn" data-value="4">Fair</button>
            <button class="wellness-choice-btn" data-value="2">Poor</button>
          </div>
        </div>

        <div class="wellness-metric-group">
          <div class="wellness-metric-label">Mood</div>
          <div class="wellness-btn-group" data-metric="mood">
            <button class="wellness-choice-btn" data-value="9">Happy</button>
            <button class="wellness-choice-btn" data-value="7">Content</button>
            <button class="wellness-choice-btn" data-value="4">Irritable</button>
            <button class="wellness-choice-btn" data-value="2">Upset</button>
          </div>
        </div>

      </div>

      <button class="btn-save-wellness" id="save-wellness-btn">Save Wellness Check</button>
      <div class="wellness-save-result" id="wellness-save-result" style="display:none;"></div>
    </section>

    <!-- Divider between Daily Checks and Intake sections -->
    <div class="section-divider"></div>

    <!-- ========== INTAKE SECTION ========== -->
    <section class="card intake-card" id="intake-section">
      <div class="card-header">
        <span class="card-icon">ğŸ’§</span>
        <h2>Fluid Intake</h2>
      </div>

      <div class="intake-totals">
        <span class="intake-amount" id="intake-amount">-- ml</span>
        <span class="intake-limit" id="intake-limit">/ -- ml</span>
        <span class="intake-pct" id="intake-pct">--%</span>
      </div>

      <!-- Progress bar -->
      <div class="progress-container" aria-label="Intake progress">
        <div class="progress-bar" id="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="over-limit-warning" id="over-limit-warning" style="display:none;">
        âš ï¸ Daily limit exceeded!
      </div>

      <!-- Intake breakdown cards -->
      <div class="fluid-types" id="fluid-types">
        <!-- Populated by JS -->
      </div>
    </section>

    <!-- ========== OUTPUT LOG ========== -->
    <section class="card output-card">
      <div class="card-header">
        <span class="card-icon">ğŸš½</span>
        <h2>Outputs</h2>
        <span class="badge" id="output-count">0</span>
      </div>
      <ul class="output-list" id="output-list">
        <li class="empty-state">No outputs logged today</li>
      </ul>
    </section>

    <!-- ========== GAG COUNTER ========== -->
    <section class="card gag-card">
      <div class="card-header">
        <span class="card-icon">ğŸ¤¢</span>
        <h2>Gag Episodes</h2>
        <span class="badge badge-warn" id="gag-count">0</span>
      </div>
      <ul class="gag-list" id="gag-list">
        <li class="empty-state">No gag episodes today</li>
      </ul>
    </section>

  </main>

  <footer class="footer">
    <span>Last updated: <span id="last-updated">--</span></span>
    <span>Auto-refresh: 30s</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
